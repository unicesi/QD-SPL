<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Generic Editor</title><link rel="stylesheet" href="../book.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="index.html" title="openArchitectureWare User Guide"><link rel="up" href="reference.html" title="Part&nbsp;II.&nbsp;Reference"><link rel="prev" href="xtext_reference.html" title="Xtext Reference (from oAW 4.2)"><link rel="next" href="r50.html" title="UML2 Adapter"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="generic_editor"></a>Generic Editor</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="generic_editor.html#generic_editor_introduction">Introduction</a></span></dt><dt><span class="section"><a href="generic_editor.html#generic_editor_how_to">How to Use the Generic Editor</a></span></dt><dt><span class="section"><a href="generic_editor.html#generic_editor_dyn_instances">Working with Dynamic Instances</a></span></dt><dt><span class="section"><a href="generic_editor.html#generic_editor_validation">Model Validation</a></span></dt><dt><span class="section"><a href="generic_editor.html#generic_editor_customizing">Customizing Icons and Labels</a></span></dt><dt><span class="section"><a href="generic_editor.html#generic_editor_proposals">Proposals</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="generic_editor_introduction"></a>Introduction</h2></div></div></div><p>
			The generic editor can be used to edit any EMF models even
			dynamic instances. The generic editor combines the power and
			flexibility of EMF's reflective editor with the usability
			and elegance of Eclipse Forms. The user can also dynamically
			provide constraints and icon and label providers using oAW.
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="generic_editor_how_to"></a>How to Use the Generic Editor</h2></div></div></div><p>
			The user interface of the generic editor is easy to use. It
			is based on a master/detail component. The master section
			shows the model tree, while the individual properties of the
			selected element can be edited in the details section. In
			the toolbar there is also a validation button integrated.
			This button can be used to check the model based on the used
			validation mechanism (see next paragraph).
			</p><div class="figure"><a name="generic_editor_how_to_img"></a><p class="title"><b>Figure&nbsp;26.&nbsp;Generic Editor</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/generic_editor/screenshot.png" alt="Generic Editor"></div></div></div><p><br class="figure-break">
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="generic_editor_dyn_instances"></a>Working with Dynamic Instances</h2></div></div></div><p>
			The editor can of course be used with installed EPackages.
			In that case the validation is done using the
			EValidationRegistry and the labels and icons are computed
			using EMF's
			<span class="emphasis"><em>
				ComposedAdapterFactory.Descriptor.Registry
			</em></span>
			. As this is exactly how EMF's reflective editor works there
			is not much added value besides the use of forms instead of
			the properties view.
		</p><p>
			Using the generic editor becomes more interesting when it
			comes to dynamic instances. A dynamic instance is an
			instance of an Ecore model which has not been installed into
			the workbench. The use of dynamic instances only makes EMF's
			code generator obsolete and reduces turnaround times
			significantly. In order to create a dynamic instance, all
			you have to do is open (or create) an Ecore file in your
			workspace, select an EClass and use the context menu to
			"create a dynamic instance". The action creates a new file
			and puts an instance of the selected EClass as it's root
			element. Using the generic editor one can not only edit
			theses dynamic models, but also specify constraints. In
			addition one can define how labels and icons should be
			computed, all dynamically without the need to install
			bundles into eclipse or restart the workbench.
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="generic_editor_validation"></a>Model Validation</h2></div></div></div><p>
			To get your dynamic models validated all you have to do is
			provide a oAW Check file for the metamodel. The editor will
			validate the model on startup, on save and each time the
			check button is pushed. There are some prerequisites about
			that:
			</p><div class="itemizedlist"><ul type="disc"><li>
					the project must have the openArchitectureWare
					nature enabled
				</li><li>
					the check file must be named
					<code class="filename">Checks.chk</code>
					, and
				</li><li>
					the check file must be placed in
					<code class="filename">yourEPackageName</code>
					package in project's source folder
				</li></ul></div><p>
		</p><p>
			A typical check example for an entity
			<span class="emphasis"><em>Library</em></span>
			could look like this:
			</p><pre class="programlisting">
				context Library WARNING "name#Library should have a
				name": !this.name.isEmpty();
			</pre><p>
			The suffix "name#" in the message says that this warning
			refer to the feature
			<span class="emphasis"><em>name</em></span>. With this additional information the generic editor can
			provide a hyper link and add a marker for the respective
			feature.
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="generic_editor_customizing"></a>Customizing Icons and Labels</h2></div></div></div><p>
			To customize the presentation of the model elements in the
			editor you can provide
			<span class="emphasis"><em>label()</em></span>
			and
			<span class="emphasis"><em>icon()</em></span>
			extensions. Those extensions are found if:
			</p><div class="itemizedlist"><ul type="disc"><li>
					the project has the openArchitectureWare -Nature
					enabled
				</li><li>
					the extension file is named
					<code class="filename">ItemLabelProvider.ext</code>
					, and
				</li><li>
					the extension file must be placed in
					<code class="filename">yourEPackageName</code>
					package in project's source folder
				</li><li>
					the extension names are
					<span class="emphasis"><em>label</em></span>
					for a label and
					<span class="emphasis"><em>icon</em></span>
					for an icon
				</li><li>
					they have one parameter with the according type
				</li><li>
					corresponding icons must be placed in a folder
					<code class="filename">/icons/yourEPackageName</code>
					(not necessarily on the classpath)
				</li></ul></div><p>
			</p><p>
			Example:
			</p><pre class="programlisting">
				//book String label(Book ctx):
				ctx.title.isEmpty()?"Untitled book":ctx.title;

				String icon(Book ctx): "book.gif";
			</pre><p>
			This example shows how a custom label and icon can be
			computed for an EClass called
			<span class="emphasis"><em>Book</em></span>
			. The extension
			<span class="emphasis"><em>label</em></span>
			sets a book's label to title or to "Untitled book" if it is
			empty. The extension
			<span class="emphasis"><em>icon</em></span>
			sets
			<code class="filename">icons/yourEPackageName/book.gif</code>
			image as a book's icon instead of default one.
		</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="generic_editor_proposals"></a>Proposals</h2></div></div></div><p>
			When setting a reference or an enumeration literal by
			default the editor provides all elements which would fit
			(i.e. they are of the reference's type). Sometimes these
			lists get very long. In order to filter and sort such lists
			of proposed elements one also can specify an extension For
			these extensions to be found :
			</p><div class="itemizedlist"><ul type="disc"><li>
					the project must have the openArchitectureWare
					nature enabled
				</li><li>
					the extension file must be named
					<code class="filename">Proposals.ext</code>
					, and
				</li><li>
					the extension file must be placed in
					<code class="filename">yourEPackageName</code>
					package within project's source folder
				</li><li>
					the extension's signature is: List[<span class="emphasis"><em>ReferencedMetaType</em></span>] featureName(<span class="emphasis"><em>MetaType</em></span> ctx, List[<span class="emphasis"><em>ReferencedMetaType</em></span>] list)
				</li></ul></div><p>
			In the following example one can only select from 'active'
			authors when setting the author for a book. All the authors
			are sorted by name:
			</p><pre class="programlisting">
				//reference proposal/filter List[Person] author(Book
				ctx,List[Person] l):
				l.select(e|e.isActive).sortBy(e|e.name);
			</pre><p>
			It is also possible to provide code completion for text
			attributes. The example below shows how to create a
			<span class="emphasis"><em>name</em></span>
			-proposal for Entity
			<span class="emphasis"><em>Person</em></span>
			, containing John and the names of all Persons already in
			the model.
			</p><pre class="programlisting">
				//attribute proposals
				List[String] name(Person ctx):
										{"John"}.addAll(ctx
															.eRootContainer
															.eAllContents
															.typeSelect(Person)
															.collect(e|e.name))
																.toSet()
																.toList();
			</pre><p>
		</p></div></div></body></html>